import{lib}from"noname";import{cardDefines as e,skillDefines as i,chupaiAnimations as a}from"./configs/skillAnimations.js";import{cardTriggers as n}from"./configs/cardTriggers.js";function t(t){t.playLoseHp=player=>{player&&t.playSpine("effect_loseHp",{scale:.6,speed:.8,parent:player})},t.playRecoverNumber=(player,e)=>{!player||!e||e<1||e>9||"off"===lib.config.extension_十周年UI_newDecadeStyle||t.playSpine({name:"globaltexiao/huifushuzi/shuzi2",action:String(e)},{speed:.6,scale:.5,parent:player,y:20})},t.playVirtualDamageNumber=(player,e)=>{!player||e<0||e>9||t.playSpine({name:"globaltexiao/xunishuzi/SS_PaiJu_xunishanghai",action:"play"+e},{speed:.6,scale:.5,parent:player,y:20})},t.playDamageNumber=(player,e)=>{if(!player||!e||e<=1||e>9||!lib.config.extension_十周年UI_newDecadeStyle)return;const i="off"!==lib.config.extension_十周年UI_newDecadeStyle,a=i?"globaltexiao/shanghaishuzi/SZN_shuzi":"globaltexiao/shanghaishuzi/shuzi",n={speed:.6,scale:.4,parent:player};i&&(n.y=20),t.playSpine({name:a,action:String(e)},n)},lib.element.player.inits=[].concat(lib.element.player.inits||[]).concat(async player=>{if(player.ChupaizhishiXObserver)return;let e=null;const i=i=>{i.ChupaizhishiXid||e||(window.chupaiload=!0,e=setTimeout(()=>{const n=decadeUI.config.chupaizhishi,s=a[n];"off"!==n&&s&&(i.ChupaizhishiXid=t.playSpine({name:s.name,loop:!0},{parent:i,scale:s.scale})),e=null},300))},n=i=>{i.ChupaizhishiXid&&(t.stopSpine(i.ChupaizhishiXid),delete i.ChupaizhishiXid),e&&(clearTimeout(e),e=null)},s=new MutationObserver(e=>{for(const a of e){if("class"!==a.attributeName)continue;const e=a.target;e.classList.contains("selectable")?i(e):n(e)}});s.observe(player,{attributes:!0,attributeFilter:["class"]}),player.ChupaizhishiXObserver=s});for(const[i,a]of Object.entries(e))lib.animate.card[i]=card=>{t.playSpine(a.name,{x:a.x,y:a.y,scale:a.scale})};for(const[e,a]of Object.entries(i))lib.animate.skill[e]=function(e){t.playSpine(a.name,{x:a.x,y:a.y,scale:a.scale,parent:this})};for(const[e,i]of Object.entries(n))lib.card[e]&&Object.assign(lib.card[e],i)}export{t as initSkillAnimations};
