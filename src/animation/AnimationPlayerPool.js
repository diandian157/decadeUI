import"noname";import{AnimationPlayer as n}from"./AnimationPlayer.js";class e{constructor(e,a,i){self.spine?(this.name=i,this.animations=Array.from({length:e||1},()=>new n(a))):console.error("spine 未定义.")}loadSpine(n,e,a,i){this.animations[0].loadSpine(n,e,()=>{for(let e=1;e<this.animations.length;e++){const a=this.animations[e];window.requestIdleCallback?requestIdleCallback(()=>a.prepSpine(n,!0),{timeout:200}):setTimeout(()=>a.prepSpine(n,!0),50)}a&&a()},i)}playSpineTo(n,e,a){if(a?.parent&&(a.parent=void 0),n._ap?.canvas.parentNode!==n){for(const i of this.animations)if(!i.running)return i.canvas.parentNode!==n&&(n._ap=i,n.appendChild(i.canvas)),void i.playSpine(e,a);console.error(`spine: ${this.name||""} 可用动画播放组件不足`)}else n._ap.playSpine(e,a)}}export{e as AnimationPlayerPool};
