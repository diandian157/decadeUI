import{lib,_status,ai,get,ui,game}from"noname";import{bootstrapExtension as o}from"./core/bootstrap.js";import{createDecadeUIObject as r}from"./core/decadeUI.js";import{enhanceDecadeUIRuntime as i,registerDecadeUIUtilityModule as e}from"./core/utility.js";import{setupGameAnimation as t}from"./animation/gameIntegration.js";import{setupEffects as n}from"./effects/index.js";import{setupAutoSelect as a}from"./features/autoSelect.js";import{setupCardDragSort as m}from"./features/cardDragSort.js";import{setupEquipHand as s}from"./features/equipHand.js";import{setupLuckyCard as c}from"./features/luckyCard.js";import{setupExtensionToggle as f}from"./features/extensionToggle.js";import{setupStyleHotkeys as p}from"./features/styleHotkeys.js";import{setupDisableBrowserShortcuts as u}from"./features/disableBrowserShortcuts.js";import{setupWelcomeDialog as d}from"./features/welcomeDialog.js";import{setupConfigWindow as l}from"./features/configWindow.js";import{setupSkillDieAudio as j}from"./audio/skillDieAudio.js";import{setupAudioHooks as g}from"./audio/audioHooks.js";import{setupEnhancedAudio as y}from"./audio/enhancedAudio.js";import{setupDynamicSkin as k}from"./skins/dynamicSkin.js";import{registerLegacyModules as w}from"./ui/progress-bar.js";import{initCardPrompt as h}from"./ui/cardPrompt.js";import{initComponent as I}from"./ui/component.js";import{setupCharacterBackground as x}from"./ui/characterBackground.js";import{setupCardStyles as S,updateCardStyles as U}from"./ui/cardStyles.js";import{setupCharacterNamePrefix as _}from"./ui/characterNamePrefix.js";import{setupSkillDisplay as D}from"./ui/skillDisplay.js";import{setupOutcropAvatar as b}from"./ui/outcropAvatar.js";import{initSkills as A}from"./skills/index.js";import{createLbtnPlugin as H}from"../ui/lbtn/plugin.js";import{createSkillPlugin as M}from"../ui/skill/plugin.js";import{createCharacterPlugin as N}from"../ui/character/plugin.js";const P=(o,r)=>(e(o),o.config=r,o.config.campIdentityImageMode??=!0,o.config.update=()=>{const o=lib.extensionMenu[`extension_${decadeUIName}`];for(const r in o)o[r]?.update&&o[r].update()},o.init(),t(lib,game,ui,get,ai,_status),n(),I(o),A(),h({game:game,ui:ui}),a(),m(),s(),c(),f(),p(),u(),l(),y(),x(),S(),o.updateCardStyles=U,_(),D(),b(),j(),g(),k(),d(lib.extensionPack.十周年UI),console.timeEnd(decadeUIName),o);async function B(e){if(!o())return;const t=r();window.decadeUI=t,t.config={...e,dynamicSkin:lib.config.extension_十周年UI_dynamicSkin??!1,newDecadeStyle:lib.config.extension_十周年UI_newDecadeStyle??"on",dynamicSkinOutcrop:lib.config.extension_十周年UI_dynamicSkinOutcrop??!1,rightLayout:"on"===lib.config.extension_十周年UI_rightLayout},i(t),P(t,t.config),w(t.config),await async function(){if(["chess","tafang","hs_hearthstone"].includes(get.mode()))return;const o=[{name:"lbtn",creator:H},{name:"skill",creator:M},{name:"character",creator:N}];for(const{name:i,creator:e}of o)try{const o=await e(lib,game,ui,get,ai,_status,window.app);o&&(o.name&&(window.app.pluginsMap[o.name]=o),!o.precontent||o.filter&&!o.filter()||o.precontent(),window.app.plugins.push(o))}catch(r){console.error(`[十周年UI] ${i}模块加载失败:`,r)}}()}export{B as content,P as finalizeDecadeUICore};
