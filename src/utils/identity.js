import{get,game,lib,_status}from"noname";function n(player,n,t,e){if(!(player instanceof HTMLElement&&"player"===get.itemtype(player)))throw new Error("player参数无效");n||(n=player.identity);const i=get.mode();let o=!1;if(t){const result=function(player,n,t,e){let i=!1;const o={identity:()=>{(n||"").indexOf("cai")<0&&(e?player.special_identity&&(n=player.special_identity+"_bg"):n=player.special_identity||n+"2")},guozhan:()=>{"unknown"===n&&(n=player.wontYe()?player.trueIdentity||lib.character[player.name1][1]:"ye"),n=get.is.jun(player)?e?"君":get.translation(n)+"君":"ye"===n?"野心家":"qun"===n?"群雄":get.translation(n)+"将",i=!0},versus:()=>{if(i=!0,!game.me)return;const result=function(player,n){let t=!0;const e={zhu:"主公",zhong:"忠臣",fan:"反贼"},i={three:()=>e[n]||(t=!1,n),standard:()=>e[n]||(t=!1,n),four:()=>e[n]||(t=!1,n),guandu:()=>e[n]||(t=!1,n),two:()=>{const n=player.finalSide||player.side;return game.me.side===n?"友方":"敌方"},siguo:()=>get.translation(n)+"将",jiange:()=>get.translation(n)+"将"},o=i[_status.mode];o?n=o():t=!1;return{identity:n,translated:t}}(player,n);n=result.identity,i=result.translated},doudizhu:()=>{n+="2"},boss:()=>{i=!0;const t={zhu:"BOSS",zhong:"仆从",cai:"盟军"};t[n]?n=t[n]:i=!1}};return o[t]?.(),{identity:n,translated:i}}(player,n,i,e);n=result.identity,o=result.translated,o||(n=get.translation(n)),e&&(n=n[0])}else{const result=function(player,n,t){const e={identity:()=>{if(!player.isAlive()||player.identityShown||player===game.me)return(player.special_identity||n||"").replace(/identity_/,"")},guozhan:()=>{"unknown"===n&&(n=player.wontYe()?lib.character[player.name1][1]:"ye"),get.is.jun(player)&&(n+="jun")},versus:()=>{if(game.me)return function(player,n){const t={standard:()=>({trueZhu:"shuai",trueZhong:"bing",falseZhu:"jiang",falseZhong:"zu"}[n]),three:()=>"wei"===get.translation(player.side+"Color")?n+"_blue":n,four:()=>"wei"===get.translation(player.side+"Color")?n+"_blue":n,guandu:()=>"wei"===get.translation(player.side+"Color")?n+"_blue":n,two:()=>{const n=player.finalSide||player.side;return game.me.side===n?"friend":"enemy"}};return t[_status.mode]?.()}(player,n)},doudizhu:()=>"zhu"===n?"dizhu":"nongmin",boss:()=>({zhu:"boss",zhong:"cong",cai:"meng"}[n]||n)},i=e[t];return i?.()}(player,n,i);if(void 0!==result)return result}return n}export{n as getPlayerIdentity};
