import{lib,ui,get}from"noname";const t=["周年","五一","踏青","牛年","开黑","冬至","春分","鼠年","盛典","魏魂","群魂","蜀魂","吴魂","猪年","圣诞","国庆","狗年","金秋","奇珍","元旦","小雪","冬日","招募","梦之回廊","虎年","新春","七夕","大雪","端午","武将","中秋","庆典"],n=["盒子","宝盒","礼包","福袋","礼盒","庆典","盛典"],e=["通过","使用","开启"],o=[",大家快恭喜TA吧！",",大家快恭喜TA吧。无名杀是一款非盈利游戏(づ ●─● )づ",",祝你新的一年天天开心，万事如意"];function r(t){const n=[];for(const e of function(){const t=[...lib.config.characters];for(const n of Object.keys(lib.characterPack)){if(!n.startsWith("mode_extension_"))continue;const e=n.slice(15);!0===lib.config[`extension_${e}_characters_enable`]&&t.push(n)}return t}()){const o=lib.characterPack[e];if(o)for(const[e,r]of Object.entries(o)){if(r.isUnseen||lib.filter.characterDisabled(e))continue;const result=t(e);result&&n.push(result)}}return n}function i(t){const n=get.slimName(t);return n&&n!==t?n:null}function c(c){const s=lib.config.connect_nickname,a=r(i),f=r(t=>{const n=i(t);return n?`${n}×1`:null}),l=r(t=>{const n=i(t);if(!n)return null;const e=function(t){let n=lib.characterTitle[t]||"";return n.startsWith("#")&&(n=n.slice(2)),get.plainText(n)}(t);return e?`${e}·${n}*1（动+静）`:`${n}*1（动+静）`}),u=[a.randomGet(),s].randomGet(),d=[`<font color="#56e4fa">${f.randomGet()}</font>`,`<font color="#f3c20f">${l.randomGet()}</font>`].randomGet(),h="off"!==c.GTBBFont,b=h?"#22c622":"#B3E1EC";return`\n\t\t<marquee direction="left" behavior="scroll" scrollamount="9.8" loop="1" width="100%" height="50" align="absmiddle">\n\t\t\t<font face="${h?"FZLBJW":"yuanli"}">\n\t\t\t\t玩家\n\t\t\t\t<font color="${h?"#efe8dc":"#86CC5B"}"><b>${u}</b></font>\n\t\t\t\t${e.randomGet()}\n\t\t\t\t<font color="${b}"><b>${t.randomGet()}${n.randomGet()}</b></font>\n\t\t\t\t获得了<b>${d}</b>${o.randomGet()}\n\t\t\t</font>\n\t\t</marquee>\n\t`}function s(){const t=lib.config.extension_十周年UI_GTBBYangshi;if("0"===t)return;const n=ui.create.div(""),e=ui.create.div("",n);n.id="gtbb-container";const o=lib.config["extension_十周年UI_GTBBFont"],r=parseFloat(lib.config["extension_十周年UI_GTBBTime"]);function i(){e.innerHTML=c({GTBBFont:o}),n.show(),setTimeout(()=>n.hide(),15500)}!function(t,n,e){e?(t.style.cssText="pointer-events:none;width:100%;height:25px;font-size:23px;z-index:6;",n.style.cssText="pointer-events:none;background:rgba(0,0,0,0.5);width:100%;height:27px;"):(t.style.cssText="pointer-events:none;width:56%;height:35px;font-size:18px;z-index:20;background-size:100% 100%;background-repeat:no-repeat;left:50%;top:15%;transform:translateX(-50%);",t.style.backgroundImage=`url(${lib.assetURL}extension/十周年UI/ui/assets/lbtn/uibutton/goutuo.png)`,n.style.cssText="pointer-events:none;width:85.5%;height:35px;left:8%;line-height:35px;")}(n,e,"1"===t);const s=setInterval(()=>{!n.parentNode&&ui.window&&(ui.window.appendChild(n),clearInterval(s),i(),window._gtbbInterval=setInterval(i,r))},5e3);window._gtbbCheckId=s}export{s as initGTBB};
