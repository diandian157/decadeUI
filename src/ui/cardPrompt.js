import{lib,get,ui,game}from"noname";const e=["compareMultiple","chooseToCompare","chooseToCompareMultiple"],n={sha:"选择1名角色，作为杀的目标",tao:"你可以回复1点体力",jiu:"使用酒，令自己的下1张使用的【杀】伤害+1",wuzhong:"使用后你可再摸2张牌",juedou:"任意1名决斗目标，你们轮流出杀，出不下去的人受1伤害",guohe:"选择1名目标，弃掉他1张牌",shunshou:"选择1名距离为1的目标，获得其1张牌",wugu:"使用后所有人轮流拿1张牌",taoyuan:"所有受伤的角色将恢复1点体力",nanman:"使用南蛮入侵，每个人都要出杀，否则掉血",wanjian:"使用万箭齐发，每个人都要出闪，否则掉血",jiedao:"选择2名角色，借角色1的武器杀角色2，若角色1不出杀则将武器给你",huogong:"选择1名有手牌的目标火攻，他给你看1张牌，你弃掉同花色则他掉1血",tiesuo:"直接重铸，或选择1至2个角色作为连环的目标",lebu:"选择你要使用乐不思蜀的目标，他可能被跳过出牌",shandian:"挂上闪电，所有人轮流判定，可能掉3血",bingliang:"选择1个目标兵粮寸断，让他可能摸不了牌",bagua:"装备效果，需要出闪时可以判定，如果是红色则免费出闪",renwang:"装备效果，黑杀对你无效",tengjia:"装备效果，普通杀、南蛮入侵、万箭齐发对你无效；但受到火焰伤害+1",baiyin:"装备效果，不会受到超过1的伤害；失去装备时可以回1血",huxinjing:"装备效果，受到致命伤害时可弃置此牌防止伤害",lanyinjia:"装备效果，可将手牌当闪，受杀伤害时弃置此牌",heiguangkai:"装备效果，多目标的杀或伤害锦囊对你无效",minguangkai:"装备效果，免疫火攻火杀火烧连营，小势力不会被横置",zhuge:"装备效果，可以无限出杀",qinggang:"装备效果，无视对方防具",qinglong:"装备效果，杀被闪后可以继续追杀",zhangba:"装备效果，把任意2张手牌当杀",guanshi:"装备效果，可以弃2张牌强制命中",fangtian:"装备效果，如果最后1张手牌是杀，可以额外杀2个人",qilin:"装备效果，杀中后可以弃置目标1匹马",cixiong:"装备效果，如果杀的是异性，则他弃1张牌或你摸1张牌",hanbing:"装备效果，杀中后可以不造成伤害改为弃他2张牌",guding:"装备效果，如果目标没牌则杀伤害+1",zhuque:"装备效果，可以将普通杀转化为火焰杀",qibaodao:"装备效果，杀无视防具，目标满血时伤害+1",zhungangshuo:"装备效果，杀指定目标后互相弃1张手牌",yinyueqiang:"装备效果，回合外使用或打出黑色手牌后可出杀",meiyingqiang:"装备效果，其他角色回合内首次失去牌时可使用杀",liuyedao:"装备效果，杀造成伤害时可弃2张手牌令伤害+1",baipidao:"装备效果，杀造成伤害后可获得目标1张手牌",yitianjian:"装备效果，杀造成伤害后可弃1手牌回复1点体力",qixingbaodao:"装备效果，进入装备区后弃置其他装备和判定牌",sanjian:"装备效果，杀造成伤害后可弃1牌对距离1的另一角色造成1伤",feilongduofeng:"装备效果，杀指定目标后令其弃1牌，令其濒死时获得其1手牌",ty_feilongduofeng:"装备效果，杀指定目标后可摸1牌或令其弃1牌",tiejili:"装备效果，准备阶段可将攻击范围改为体力值",wutiesuolian:"装备效果，杀指定目标后令其横置",wuxinghelingshan:"装备效果，使用属性杀后可改变属性",jueying:"装备绝影，防守时与其他玩家的距离+1",dilu:"装备的卢马，防守时与其他玩家的距离+1",zhuahuang:"装备爪黄飞电马，防守时与其他玩家的距离+1",hualiu:"装备骅骝，防守时与其他玩家的距离+1",chitu:"装备赤兔马，攻击时与其他玩家的距离-1",dawan:"装备大宛马，攻击时与其他玩家的距离-1",zixin:"装备紫骍马，攻击时与其他玩家的距离-1",jingfanma:"装备惊帆，攻击时与其他玩家的距离-1",liulongcanjia:"装备效果，占用双马位，攻击距离-1防守距离+1",muniu:"装备效果，你可以将卡牌放在木牛里当作手牌使用或者移动到一名玩家装备区",jinhe:"装备锦盒给其他角色，观看牌堆顶2张牌选1张作为「礼」",tongque:"装备效果，每回合首张应变牌无视条件生效",tianjitu:"装备效果，进入时弃1张牌，离开时摸至5张手牌",taigongyinfu:"装备效果，出牌阶段开始横置/重置1人，结束可重铸1牌",dinglanyemingzhu:"装备效果，获得或增强制衡技能",yuxi:"装备效果，视为大势力，摸牌+1，出牌阶段视为使用知己知彼",taipingyaoshu:"装备效果，免疫属性伤害，手牌上限+势力数，失去时摸2牌",yexingyi:"装备效果，你不是黑色锦囊牌的合法目标",zj_yexingyi:"装备效果，红色杀对你无效",nvzhuang:"装备女装给其他角色，男性装备或失去时弃1张牌",yinfengjia:"装备引蜂甲给其他角色，受到锦囊伤害+1",yinfengyi:"装备引蜂衣给其他角色，受锦囊伤害+1，毒失去体力+1",zheji:"装备折戟给其他角色，这是一把坏掉的武器",wufengjian:"装备无锋剑给其他角色，使用杀时需弃1张牌",duanjian:"装备断剑给其他角色，这是一把坏掉的武器",serafuku:"装备水手服给其他角色，男性被杀时判定黑色伤害+1",yajiaoqiang:"装备效果，他人回合首次使用黑牌后可获得此牌",numa:"装备驽马给其他角色，进入装备区时弃其他装备",yonglv:"装备庸驴给其他角色，攻击距离-1但其他人到你距离为1",zhanxiang:"装备战象给其他角色，防守距离+1且无法被赠予",caochuan:"抵消伤害牌效果并获得此牌",jiejia:"选择1名有装备的角色，令其收回所有装备",kaihua:"选择1名角色，弃1-2张牌再摸等量牌，弃装备多摸1张",zhulu_card:"所有角色从亮出的装备牌中选1张装备",du:"毒牌，正面离开手牌或拼点亮出时失去1点体力",guaguliaodu:"选择1名已受伤角色，回复1点体力并可弃1张毒",chenghuodajie:"选择1名有手牌的角色，展示其1张牌，其交给你或受1伤",tuixinzhifu:"选择距离1的角色，获得其至多2张牌再还等量牌",xinge:"出牌阶段限一次，将1张手牌交给其他角色",suijiyingbian:"此牌视为你上一张使用的基本牌或普通锦囊",zhujinqiyuan:"选择1名有牌的角色，距离>1弃其牌，距离=1获得其牌",dongzhuxianji:"选择1名角色，卜算2然后摸2张牌",chuqibuyi:"选择1名有手牌的角色，展示其1张牌，花色不同则造成1伤",lx_huoshaolianying:"选择1名角色，展示其1牌，弃同花色牌造成1点火伤",suibozhuliu:"置于判定区，判定为方块则移动1张装备给下家",yidugongdu:"选择1名已受伤角色，若双方都有毒则弃毒各摸2张，否则各受1伤",dajunyajing:"选择1名角色，其他角色可对其使用杀",yushijiesui:"选择1名角色，对其造成1伤然后你失去1点体力",jinchan:"抵消对你生效的基本牌或普通锦囊并摸2张牌",fulei:"置于判定区，判定为黑桃则受到累计次数的雷伤",shengdong:"选择1名角色，交给其1张牌，其将2张牌交给另一人",zengbin:"选择1名角色，摸3张牌然后弃1张非基本牌或2张牌",caomu:"选择1名角色，判定非梅花则少摸1牌，距离1的角色各摸1牌",jianhao:"展示牌堆顶牌，猜下张点数大小，猜对可继续或获得所有展示牌",wangmei:"选择1名角色，其本回合梅花手牌视为桃",zhisi:"对自己使用，体力上限减至1，每减1点可视为使用1张火杀",qingsuan:"选择1名对你造成过伤害的角色，随机造成0-2点伤害",jiaoyou:"对所有角色使用，展示手牌中的伤害牌，这些牌伤害+1",haoyun:"选择颜色后判定，猜对获得此牌并可继续",liehuo:"对所有其他角色使用，暗选手牌，颜色相同的角色受1点火伤",shenbing:"对所有角色使用，弃所有装备或从牌堆装备各类型装备",jinnao:"选择1名角色，你和目标获得「金」标记可防止1次伤害",yinglang:"对所有角色使用，本轮使用牌指定目标后获得其1张牌",youfu:"选择1名角色，本阶段对自己使用基本牌或锦囊可额外指定其",fugui:"选择1名角色，其下次获得牌后你摸等量牌",tangying:"选择1名角色，结束回合并翻面托管，其下回合多执行1个阶段",dashi:"选择2名其他角色，令他们交换手牌",guilai:"选择1名已死亡的角色，令其复活",xietianzi:"对自己使用，结束出牌阶段，弃牌阶段后可弃1牌获得额外回合",shuiyanqijunx:"选择1名角色，令其弃所有装备或受1点雷伤",shuiyanqijuny:"选择1-2名角色，造成1点雷伤，第1个目标弃牌，第2个目标摸牌",lulitongxin:"直接重铸，或对所有大势力或小势力角色使用，未横置则横置，已横置则摸1牌",lianjunshengyan:"选择你和另一势力所有角色，你摸牌回血，其他人摸牌并重置",zj_lianjunshengyan:"选择你和1名其他角色，选择摸牌或回复体力",chiling:"对所有未确定势力角色使用，明置武将摸牌或弃装备或失去1点体力",diaohulishan:"选择至多2名角色，令其本回合视为移出游戏",huoshaolianying:"对距离最近的横置角色使用，造成1点火伤",yuanjiao:"选择1名不同势力角色，其摸1牌然后你摸3牌",zhibi:"直接重铸，或选择1名角色，观看其手牌或1张暗置武将牌",yiyi:"选择至多3名角色，各摸2张牌然后弃2张牌",qizhengxiangsheng:"选择1名角色标记奇兵或正兵，其打出杀或闪，否则受伤或被拿牌",dz_mantianguohai:"选择1-2名有牌的角色，获得其各1张牌再还各1张牌",qijia:"选择1名有装备的角色，令其弃武器和-1马或防具和+1马",wuliu:"装备效果，同势力其他角色攻击范围+1",shangfangbaojian:"装备效果，同势力角色出杀后可交换手牌",qingmingjian:"装备效果，回合内首次弃至少2张牌可对1人造成1伤",mengchong:"装备效果，使用牌后选择与其他角色距离+1或-1",zhaoshu:"置于武将牌上，同势力角色可放置手牌，集齐4花色可召唤势力锦囊",mb_qingnangshu:"装备效果，准备阶段加1点体力上限并回复1点体力",mb_chuanguoyuxi:"装备效果，弃牌阶段摸1牌且手牌上限+2，非主公失去1点体力",jilinqianyi:"装备效果，攻击范围为已损失体力值，杀结算时范围内其他人不能用牌",khquanjiux:"所有角色手牌变酒并轮流打出，不打出的受所有人各1伤",nisiwohuo:"所有其他角色轮流对最近的人出杀或失去1点体力，直到有人死亡",wutian:"对自己使用，从3个伤害技能中选1个获得至下回合",qixin:"选择1名角色，令其重新分配你们的手牌，手牌少的摸1张",chadao:"选择1名角色，令其获得2张伤害牌",chadaox:"令场上获得两肋插刀效果，受伤时转移给队友",khquanjiu:"对所有角色使用，使用酒或点数9的牌，否则失去1点体力",luojing:"对濒死角色使用，结束其濒死，其死亡后你摸1张牌",hongyun:"选择你和1名有手牌的角色，各弃至多2张牌获得等量红桃牌",shengsi:"对濒死角色使用，令其回复2点体力，其死亡后你立即死亡",younan:"对所有未横置角色使用，令其横置",leigong:"对所有角色使用，各进行闪电判定，每有人受伤你摸1张牌",tianlei:"对所有角色使用，各放置1张闪电到判定区",yifu:"选择1名角色，双方选择是否成为对方义父，义子准备阶段交1张牌",gx_lingbaoxianhu:"装备效果，造成大于1的伤害或有人死亡后加1点体力上限并回血",gx_taijifuchen:"装备效果，杀指定目标后令其弃牌或不可响应此杀",gx_chongyingshenfu:"装备效果，受到牌造成的伤害后记录牌名，再受同名牌伤害-1",cheliji_sichengliangyu:"装备效果，回合结束时手牌少于体力值可摸2牌然后弃此牌",cheliji_tiejixuanyu:"装备效果，其他角色回合结束时若其未造成伤害可令其弃2牌",cheliji_feilunzhanyu:"装备效果，其他角色回合结束时若其用过非基本牌可获得其1牌",pyzhuren_heart:"装备效果，杀造成伤害后判定，红色回血，黑色摸2牌",pyzhuren_diamond:"装备效果，杀造成伤害时可弃1牌令伤害+1，杀次数+1",pyzhuren_club:"装备效果，使用锦囊或杀时可增加1个目标，失去时回血",pyzhuren_spade:"装备效果，杀指定目标后可令其失去X点体力",pyzhuren_shandian:"装备效果，杀指定目标后令其判定，黑桃受3点雷伤，梅花受1点雷伤并回血摸牌",dagongche:"装备效果，出牌阶段开始时可视为使用杀并弃目标1牌",changandajian_equip1:"装备效果，失去时销毁并选择场上1牌，字母点数获得否则弃置",changandajian_equip2:"装备效果，失去时销毁并回血，选择场上1牌处理",changandajian_equip3:"装备效果，其他角色到你距离+2，失去时销毁并选择场上1牌处理",changandajian_equip4:"装备效果，你到其他角色距离-2，失去时销毁并选择场上1牌处理",changandajian_equip5:"装备效果，手牌上限+2，失去时销毁并选择场上1牌处理"},t=card=>{if(!card)return null;const e="string"==typeof card?card:card.name;return n[e]},a=e=>"string"==typeof e?e.replace(/＃/g,""):e,i=e=>"string"==typeof e?e.replace(/<\/?.+?\/?>/g,""):"",o=e=>i(a(e??"")).replace(/#/g,""),s=e=>{if(!e)return null;const n="object"==typeof e&&e.name?e.name:e;return n?get.slimNameHorizontal(n):null},r=e=>e?.replace(/_cost$/,"").replace(/_backup$/,""),u=e=>e?.close?.(),l=()=>{u(ui.cardDialog),delete ui.cardDialog},c=()=>(l(),ui.cardDialog=decadeUI.showHandTip()),d=(e,n,t)=>{if(!n)return;for(const i of e.childNodes)if(""===i.textContent)return i.innerHTML=n,t&&(i.dataset.type=t),i;const a=document.createElement("span");return a.innerHTML=n,t&&(a.dataset.type=t),e.appendChild(a)},g=(e,n,player)=>{const t=get.sourceSkillFor?get.sourceSkillFor(r(n)):r(n);e.appendText(get.skillTranslation(t,player),"phase")},p=(e,n)=>{((e,n)=>{n&&(Array.isArray(n)?n.forEach(n=>{n?.text&&(n.text.includes("<")||n.text.includes("&lt;")?d(e,n.text,n.style):e.appendText(n.text,n.style))}):"string"==typeof n&&(n.includes("<")||n.includes("&lt;"))?d(e,n):e.appendText(n))})(e,n),e.strokeText(),e.show()},h=(event,e,n)=>{if("function"!=typeof event.getParent)return null;let t=event.getParent();for(let a=0;a<e&&t;a++){if(n(t))return t;t=t.getParent?.()}return null},y=event=>{const n=(event=>h(event,10,n=>e.includes(n.name)))(event);if(!n)return null;let t=n.getParent();for(let a=0;a<10&&t;a++){if(t.skill)return t.skill;if(t.name&&!e.includes(t.name))return t.name;t=t.getParent?.()}return null},f=event=>{const e=event.getParent?.(),n=e?._info_map,t=n.state||1,i=t>0?"生效":"失效";const r=n._source||n;if(r.isJudge){const e=r.target,n=r.card;return((e,n,t)=>{const i=e=>a(o(e));return e===game.me?[{text:i("你的")},{text:i(n),style:"phase"},{text:i("即将")},{text:i(t),style:"生效"===t?"fire":"thunder"},{text:i("，是否使用")},{text:i("无懈可击"),style:"phase"},{text:i("？")}]:[{text:i(s(e)),style:"phase"},{text:i("的")},{text:i(n),style:"phase"},{text:i("即将")},{text:i(t),style:"生效"===t?"fire":"thunder"},{text:i("，是否使用")},{text:i("无懈可击"),style:"phase"},{text:i("？")}]})(e,get.translation(n?.viewAs||n?.name||n),i)}const u=r.player,l=r.target,card=r.card,c=get.translation(card?.name||card),d=s(u);let g;return r.multitargets&&r.targets?.length?g=get.translation(r.targets):l&&(g=l===u?"自己":s(l)),((e,n,t,i)=>{const s=e=>a(o(e));return[{text:s(e),style:"phase"},{text:s("对")},{text:s(n),style:"phase"},{text:s("使用的")},{text:s(t),style:"thunder"},{text:s("即将")},{text:s(i),style:"生效"===i?"fire":"wood"},{text:s("，是否使用")},{text:s("无懈可击"),style:"phase"},{text:s("？")}]})(d,g,c,i)},x=event=>{if(!event)return null;if((event=>!!event&&("wuxie"===event.type||"wuxie"===event.card?.name||o(event.prompt).includes("无懈可击")))(event))return f(event);if((event=>{if(!event?.respondTo)return!1;const card=Array.isArray(event.respondTo)?event.respondTo[1]:null;return"jiedao"===card?.name})(event))return(event=>{const[e]=event.respondTo,n=s(e)??"未知角色",t=s(event.sourcex)??"目标",i=e=>a(o(e));return[{text:i("请对")},{text:i(t),style:"phase"},{text:i("使用")},{text:i("杀"),style:"phase"},{text:i("，或令")},{text:i(n),style:"phase"},{text:i("获得你的武器")}]})(event);const e=e=>a(o(e)),[n=1,t=n]=get.select(event.selectCard)??[],r=((event,e=1)=>{if(event.prompt2&&"string"==typeof event.prompt2){const e=event.prompt2.match(/共需.*?(\d+)张/);if(e?.[1]){const n=parseInt(e[1],10);if(!isNaN(n)&&n>0)return n}}const n=event.getParent?.(),t=[n,event].filter(Boolean);for(const a of t)for(const e in a)if(e.endsWith("Required")&&"number"==typeof a[e]&&a[e]>1)return a[e];return e})(event,t>=0?t:n),{actionWord:u,cardName:l}=(e=>{const n={actionWord:"打出",cardName:""};if(!Array.isArray(e)||!e[1])return n;const card=e[1],t=card?.name||card;if(!t||"string"!=typeof t)return n;const a=lib.translate?.[t+"_info"]||get.translation(t+"_info");if(!a||"string"!=typeof a)return n;const o=(get.plainText?get.plainText(a):i(a)).match(/(?:需|须)(打出|使用)(?:.*?张|一张)【?(.+?)】?|打出(?:.*?张|一张)【?(.+?)】?/);return o?o[1]?{actionWord:o[1],cardName:o[2]}:{actionWord:"打出",cardName:o[3]}:n})(event.respondTo),c=(event=>{if(Array.isArray(event.respondTo)&&event.respondTo[1]){const e=event.respondTo[1],n=e?.name||e;if(n)return get.translation(n)}const e=event.getParent?.(),n=e?.skill||e?.name;return n?get.skillTranslation(n,event.player):"当前请求"})(event);return l||c?[{text:e(`请${u}${r}张`)},{text:e(l||"牌"),style:"phase"},{text:e("响应")},{text:e(c),style:"phase"}]:null},m=event=>{l(),u(event.dialog),event.dialog=!1,event.prompt=!1;const e=c(),n=y(event),t=(event=>null!==h(event,5,e=>"phaseDiscard"===e.name))(event);t?e.appendText("弃牌阶段","phase"):((e,event,n)=>{const t=n||event.getParent?.()?.skill||event.getParent?.()?.name||"";t&&(g(e,t,event.player),e.appendText("："))})(e,event,n);const o=(ui.selected?.cards??[]).length,[s=0,r=s]=get.select(event.selectCard)??[],d=a(i((t?"，":"")+((event,e,n,t)=>{const a=(i=event.position)&&"h"!==i?"e"===i?"装备":"":"手";var i;return`${event.forced?"请":"是否"}弃置${e}/${n}张${a}牌${t!==n?`（至少${t}张）`:""}${event.forced?"":"？"}`})(event,o,r>=0?r:s,s)));e.appendText(d),p(e),event.filterStop=function(){this.step>1&&ui.cardDialog&&l()}},j=event=>{if("phase"!==event.type)return!1;const e=ui.selected?.cards??[],n=c();return 1===e.length?((e,n)=>{const o=t(n);if(o)e.appendText(a(i(o)));else{const t=get.translation(`${n}_info`),o=get.plainText?get.plainText(t):i(t);e.appendText(a(i(o)))}})(n,get.name(e[0])):(e=>{e.appendText("出牌阶段","phase"),e.appendText(a(i("，请选择一张卡牌")))})(n),p(n),!0},T=event=>{const e=y(event);(event=>{if("wuxie"!==event.type)return!1;u(event.dialog),event.dialog=!1,event.prompt=!1;const e=c();return p(e,f(event)),!0})(event)||((event,e)=>{if(!event.respondTo)return!1;event.prompt=!1;const n=c();e&&(g(n,e,event.player),n.appendText("，"));const t=x(event);return!!t&&(p(n,t),!0)})(event,e)||(event=>{if("dying"!==event.type||!event.dying)return!1;u(event.dialog),event.dialog=!1,event.prompt=!1;const e=c(),n=s(event.dying)??get.translation(event.dying);return d(e,n,"phase"),e.appendText(a(i(`濒死，需要${1-event.dying.hp}个桃，是否帮助？`))),p(e),!0})(event)||j(event)};function b({game:e,ui:n}){if(lib.config["extension_十周年UI_cardPrompt"]&&(window.getDecPrompt=a,lib.hooks.checkBegin.add(event=>{event.player===e.me&&("chooseToUse"===event.name&&("dying"===event.type&&event.dying||event.respondTo)&&(event.prompt=!1,event.prompt2=!1),"chooseToDiscard"===event.name&&(event.prompt=!1,event.prompt2=!1),"chooseToRespond"===event.name&&(event.prompt=!1,event.prompt2=!1))}),lib.hooks.checkButton.add(event=>{const e=event.dialog;if(!e?.buttons)return;const t=get.select(event.selectButton)[1],a=-1===t;let i=!1;e.buttons.forEach(e=>{if(e.classList.contains("unselectable"))return;const o=event.filterButton(e,event.player)&&lib.filter.buttonIncluded(e),s=e.classList.contains("selected");o?n.selected.buttons.length<t?e.classList.add("selectable"):a?(e.classList.add("selected"),n.selected.buttons.add(e)):e.classList.remove("selectable"):(e.classList.remove("selectable"),a&&s&&(e.classList.remove("selected"),n.selected.buttons.remove(e))),s?e.classList.add("selectable"):!i&&e.classList.contains("selectable")&&(i=!0)}),event.custom?.add?.button?.()}),lib.hooks.checkEnd.add(event=>{event.player===e.me?setTimeout(()=>{if(!n.cardDialog?._isLuckyCardTip)switch(event.name){case"chooseToDiscard":m(event);break;case"chooseToUse":T(event);break;case"chooseToRespond":(event=>{u(event.dialog),event.dialog=!1,event.prompt2=!1,event.prompt=!1;const e=c(),n=y(event);n&&(g(e,n,event.player),e.appendText("，"));const t=x(event);t?p(e,t):(e.appendText("请打出响应牌"),p(e))})(event);break;default:l()}},0):l()}),!e.__decadePromptCleanupInstalled&&"function"==typeof e.over)){e.__decadePromptCleanupInstalled=!0;const n=e.over;e.over=function(...e){try{(()=>{l();const e=decadeUI?.statics?.handTips;Array.isArray(e)&&e.forEach(e=>{e&&(e.clear?.(),e.hide?.(),e.$info&&(e.$info.innerHTML=""),e.closed=!0)})})()}catch(t){}return n.apply(this,e)}}}export{a as decPrompt,t as getCardPhasePrompt,b as initCardPrompt,o as sanitizePrompt,i as stripTags};
