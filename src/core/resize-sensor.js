import"noname";const t=()=>class{constructor(t){this.element=t,this.width=t.clientWidth||1,this.height=t.clientHeight||1,this.maxSize=1e4,this.events=[],this.initScrollElements()}initScrollElements(){const t="position:absolute;top:0;bottom:0;left:0;right:0;z-index:-10000;overflow:hidden;visibility:hidden;transition:all 0s;",e="transition:all 0s!important;animation:none!important;";this.expand=this.createContainer(t),this.shrink=this.createContainer(t);const i=document.createElement("div");i.style.cssText=e,i.style.width=this.maxSize*this.width+"px",i.style.height=this.maxSize*this.height+"px";const s=document.createElement("div");s.style.cssText=e,s.style.width="250%",s.style.height="250%",this.expand.appendChild(i),this.shrink.appendChild(s),this.element.appendChild(this.expand),this.element.appendChild(this.shrink),this.expand.offsetParent!==this.element&&(this.element.style.position="relative"),this.resetScroll(),this.onscroll=this.handleScroll.bind(this),this.expand.addEventListener("scroll",this.onscroll),this.shrink.addEventListener("scroll",this.onscroll)}createContainer(t){const e=document.createElement("div");return e.style.cssText=t,e}resetScroll(){const t=this.maxSize*this.width,e=this.maxSize*this.height;this.expand.scrollTop=this.shrink.scrollTop=e,this.expand.scrollLeft=this.shrink.scrollLeft=t}handleScroll(){const t=this.element.clientWidth||1,e=this.element.clientHeight||1;t===this.width&&e===this.height||(this.width=t,this.height=e,this.dispatchEvent()),this.resetScroll()}addListener(t,e=!0){this.events.push({callback:t,capture:e})}dispatchEvent(){let t=!1;this.events.forEach(e=>{e.capture?e.callback():t=!0}),t&&requestAnimationFrame(()=>this.dispatchDeferredEvents())}dispatchDeferredEvents(){this.events.forEach(t=>{t.capture||t.callback()})}close(){this.expand.removeEventListener("scroll",this.onscroll),this.shrink.removeEventListener("scroll",this.onscroll),this.element&&(this.element.removeChild(this.expand),this.element.removeChild(this.shrink)),this.events=null}};export{t as createResizeSensorClass};
