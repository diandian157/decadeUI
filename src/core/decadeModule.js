import{ui,lib,get}from"noname";import{createLinkElement as s,createScriptElement as t}from"./loader.js";import{checkVersionCompatibility as e}from"../utils/version.js";import{prefixMarkModule as c}from"../ui/prefixMark.js";const o=["chess","tafang","hs_hearthstone"],n=["on","off","othersOff","onlineUI","babysha","codename"],i={on:"shizhounian",off:"shousha",othersOff:"xinsha",onlineUI:"online",babysha:"baby",codename:"codename"};function a(s,t){const e=`extension_十周年UI_${s}`,c=lib.config[e];return void 0!==c?c:t}function r(){if(e(),!ui.css.layout)return{};ui.css.layout.href?.includes("long2")||(ui.css.layout.href=`${lib.assetURL}layout/long2/layout.css`);const r={js:s=>s&&t(s,!1),jsAsync:s=>s&&t(s,!0),css:t=>t&&s(t),modules:[],import(s){"function"==typeof s&&this.modules.push(s)},prefixMark:c,init:async function(){["src/styles/extension.css","src/styles/decadeLayout.css","src/styles/card.css","src/styles/meihua.css"].forEach(s=>this.css(`${decadeUIPath}${s}`));const s=a("newDecadeStyle","on"),t=n.indexOf(s);this.css(`${decadeUIPath}src/styles/player${-1!==t?t+1:2}.css`),this.css(`${decadeUIPath}src/styles/equip.css`),this.css(`${decadeUIPath}src/styles/layout.css`),document.body.setAttribute("data-style",s),a("meanPrettify",!1)&&(ui.css.decadeMenu=this.css(`${decadeUIPath}src/styles/menu.css`)),await this.js(`${decadeUIPath}src/libs/spine.js`);const e=get.mode(),c=lib.config.phonelayout;if(!o.includes(e)){const t=i[s]||"shizhounian",e=`${decadeUIPath}ui/`;this.css(`${e}styles/fonts.css`),this.css(`${e}styles/base.css`),this.css(`${e}styles/character/${t}.css`),this.css(`${e}styles/lbtn/${t}.css`),this.css(`${e}styles/skill/${t}.css`),c||(this.css(`${e}styles/lbtn/window/${t}.css`),this.css(`${e}styles/skill/window/${t}.css`))}return this.prefixMark.setupShowCharacterHook(),this}};return r.init()}export{o as EXCLUDED_MODES,r as initDecadeModule};
