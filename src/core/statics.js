import{lib,game}from"noname";import{cardSkinPresets as e}from"../config/utils.js";import"../config/definitions/card.js";import"../config/definitions/component.js";window._decadeUICardSkinQueue=window._decadeUICardSkinQueue||[],window.registerDecadeCardSkin||(window.registerDecadeCardSkin=function(e){window._decadeUICardSkinQueue.push(e)});const n=e=>new Promise(n=>{"function"==typeof game.getFileList?game.getFileList(e,(e,i)=>n(i||[]),()=>n([])):n([])}),i=(e,n)=>e.filter(e=>e.toLowerCase().endsWith(n)).map(e=>e.substring(0,e.length-n.length));function o(){const o={READ_OK:{}},a=(e,n,i,a)=>{const s=(e=>(o[e]||(o[e]={}),o[e]))(e);for(const o of i)o&&!s[o]&&(s[o]={url:`${n}${o}.${a}`,name:o,loaded:!0});o.READ_OK[e]=!0},s=e=>{const{extensionName:o,skinKey:s="decade",folder:r,extension:t="png",cardNames:d}=e||{};if(!o)return void console.warn("[十周年UI] registerCardSkin: 缺少 extensionName");const c=r||s,w=`${lib.assetURL}extension/${o}/image/card-skins/${c}/`;if(Array.isArray(d)&&d.length>0)return void a(s,w,d,t);n(`extension/${o}/image/card-skins/${c}`).then(e=>{const n=i(e,`.${t.toLowerCase()}`);a(s,w,n,t)})};return(async()=>{const o=e.map(async e=>{const o=e.dir||e.key,s=`extension/${decadeUIName}/image/card-skins/${o}`,r=e.extension?`.${e.extension.toLowerCase()}`:".png",t=`${decadeUIPath}image/card-skins/${o}/`,d=await n(s),c=i(d,r);a(e.key,t,c,e.extension||"png")});await Promise.all(o),(window._decadeUICardSkinQueue||[]).forEach(e=>s(e)),window._decadeUICardSkinQueue=[],window.registerDecadeCardSkin=s})(),{cards:o,handTips:[],registerCardSkin:s}}export{o as createStaticsModule};
