import{ui}from"noname";const e=e=>({_dialog:e,_list:[],add(e,event,t,s){if(!(e instanceof HTMLElement&&event&&"function"==typeof t))return console.error("Invalid arguments for listener");this._list.push([e,event,t]),e.addEventListener(event,t,s)},remove(e,event,t){for(let s=this._list.length-1;s>=0;s--){const[i,n,r]=this._list[s];!(e&&i!==e||event&&n!==event||t&&r!==t)&&(i.removeEventListener(n,r),this._list.splice(s,1))}},clear(){this._list.forEach(([e,t,s])=>e.removeEventListener(t,s)),this._list.length=0}});const t=()=>({create(t,s,i="div"){const n=document.createElement(i);return Object.keys(decadeUI.dialog).forEach(e=>{decadeUI.dialog[e]&&"listens"!==e&&(n[e]=decadeUI.dialog[e])}),n.listens=e(n),t&&(n.className=t),s&&s.appendChild(n),n},show(){this!==decadeUI.dialog&&this.classList.remove("hidden")},hide(){this!==decadeUI.dialog&&this.classList.add("hidden")},animate(e,t,s,i){if(this===decadeUI.dialog||!e||!t||!s)return;const n=e.replace(/\s/g,"").split(","),r=function(e){return"number"==typeof e?e:e.includes("ms")?parseInt(e):e.includes("s")?1e3*parseFloat(e):parseInt(e)}(t);if(isNaN(r))return console.error("Invalid duration");i&&n.forEach((e,t)=>this.style.setProperty(e,i[t]));const{transitionDuration:o,transitionProperty:a}=this.style;this.style.transitionDuration=`${r}ms`,this.style.transitionProperty=e,ui.refresh(this),n.forEach((e,t)=>this.style.setProperty(e,s[t])),setTimeout(()=>{this.style.transitionDuration=o,this.style.transitionProperty=a},r)},close(e,t){if(this!==decadeUI.dialog&&this.parentNode)if(this.listens.clear(),t&&e&&this.addTempClass("opacity",e,[0]),e){const t="number"==typeof e?e:parseInt(e);setTimeout(()=>this.parentNode?.removeChild(this),t)}else this.parentNode.removeChild(this)},listens:e(null)});export{t as createDecadeUIDialogModule};
