import{ui,get,lib,game,_status}from"noname";import{setupEquipCopy as e}from"./equipCopy.js";import{setupEquipAlone as s}from"./equipAlone.js";function t(){ui.create.cardChooseAll=function(){const event=get.event();if(!event.isMine()||!event.allowChooseAll||event.complexCard||event.complexSelect||!lib.config.choose_all_button)return null;const e=get.select(event.selectCard);return e[1]<=1?null:event.cardChooseAll=ui.create.control("全选",()=>{const s=get.event(),player=s.player,t=[...ui.selected.cards].map(card=>player.getCards("s",e=>e.relatedCard===card)[0]||card);ui.selected.cards.length=0,game.check();const c=get.selectableCards();if(lib.config["extension_十周年UI_aloneEquip"])for(const card of player.getCards("e"))!c.includes(card)&&card.classList.contains("selectable")&&card.classList.contains("equip-card-selectable")&&c.push(card);const o=t.length?[...new Set(c).difference(t)]:c;o.length<=e[1]?ui.selected.cards.push(...o):ui.selected.cards.push(...o.randomGets(e[1]));for(const card of ui.selected.cards)card.classList.add("selected"),card.updateTransform(!0,0);for(const card of t)card.classList.remove("selected"),card.updateTransform(!1,0);game.check(),"function"==typeof s.custom?.add?.card&&_status.event.custom.add.card()})},e(),s()}export{t as setupEquipHand};
