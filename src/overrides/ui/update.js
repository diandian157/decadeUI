import{ui,game,get,_status,lib}from"noname";import{throttle as t}from"../../animation/utils.js";import"../../animation/DynamicPlayer.js";import{getBaseUiUpdate as o}from"./base.js";function e(){const t=ui.control.childNodes;let o,e;for(let i=0;i<t.length&&(!o&&t[i].stayleft?o=t[i]:e||(e=t[i].offsetLeft),!o||!e);i++);o&&(ui.$stayleft!=o&&(o._width=o.offsetWidth,ui.$stayleft=o),e<o._width?o.style.position="static":o.style.position="absolute")}function i(){decadeUI.queueNextFrameTick(decadeUI.layoutHand,decadeUI)}function s(player){if(!player)return;const t=player.node.judges.childNodes;for(let o=0;o<t.length;o++)if(!t[o].classList.contains("removing")&&(t[o].classList.remove("drawinghidden"),_status.connectMode)){const e=lib.translate[t[o].name+"_bg"]||get.translation(t[o].name)[0];t[o].node.judgeMark.node.judge.innerHTML=e}}function n(player){}function d(){window.documentZoom=game.documentZoom,document.body.style.zoom=game.documentZoom,document.body.style.width="100%",document.body.style.height="100%",document.body.style.transform=""}function l(){for(const t of ui.updates)t();if(void 0!==ui.dialog&&!ui.dialog.classList.contains("noupdate")){if(game.chess)return o()?.();if(ui.dialog.buttons&&ui.dialog.buttons.length||ui.dialog.forcebutton||!1!==ui.dialog.classList.contains("fullheight")||"stone"===get.mode()){ui.dialog.classList.remove("prompt");let t=ui.dialog.content.offsetHeight;t=decadeUI.isMobile()?.75*decadeUI.get.bodySize().height-80:.45*decadeUI.get.bodySize().height,ui.dialog.style.height=Math.min(t,ui.dialog.content.offsetHeight)+"px"}else ui.dialog.classList.add("prompt");ui.dialog.forcebutton||ui.dialog._scrollset?(ui.dialog.classList.add("scroll1"),ui.dialog.classList.add("scroll2")):(ui.dialog.classList.remove("scroll1"),ui.dialog.classList.remove("scroll2"))}}function a(player,t,o,e){"number"!=typeof o&&(o=0);for(let i=0;i<t.childElementCount;i++){const e=t.childNodes[i];i<o?e.style.transform="":e.classList.contains("removing")?o++:e.classList.remove("drawinghidden")}}let c=null;function r(){return c||(c=t(ui.updatex,100,ui)),c.apply(this,arguments)}export{l as uiUpdate,e as uiUpdatec,i as uiUpdatehl,s as uiUpdatej,a as uiUpdatejm,n as uiUpdatem,r as uiUpdatexr,d as uiUpdatez};
