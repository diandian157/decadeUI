import{lib,get,game}from"noname";const t=["_recasting","jiu"];function n(){const t=(t,n)=>(lib.hooks[t]??=[]).push(n);t("addSkillCheck",e),t("removeSkillCheck",i),t("checkSkillAnimate",o)}function e(t,player){if("string"!=typeof t)return;if(!["name","name1","name2"].flatMap(t=>player[t]?"name1"===t&&player.name===player.name1?[]:get.character(player[t],3)||[]:[]).includes(t)){const n=get.info(t);n&&!n.nopop&&lib.translate[t+"_info"]&&player.node.gainSkill?.gain(t)}s()}function i(t,player){"string"==typeof t&&(player.node.gainSkill?.skills?.includes(t)&&player.node.gainSkill.lose(t),s())}function o(player,n){const e=lib.config;if(!e["extension_十周年UI_enable"]||"0"===e.extension_十周年UI_jindutiaoYangshi)return;if(player===game.me)return;player.querySelector(".tipskill")?.remove();const i=e.extension_十周年UI_newDecadeStyle;t.includes(n)||"othersOff"===i||"on"===i||function(player,t){const n=document.createElement("div"),e=document.createElement("img"),i=document.createElement("div");n.className="tipskill",n.style.cssText="\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\tpointer-events: none;\n\t\tz-index: 90;\n\t\t--w: 133px;\n\t\t--h: calc(var(--w) * 50/431);\n\t\twidth: var(--w);\n\t\theight: var(--h);\n\t\tbottom: 0px;\n\t".replace(/\s+/g," "),i.innerHTML=get.skillTranslation(t,player).slice(0,2),i.style.cssText="\n\t\tcolor: #ADC63A;\n\t\ttext-shadow: #707852 0 0;\n\t\tfont-size: 11px;\n\t\tfont-family: shousha;\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\tz-index: 91;\n\t\tbottom: -22px;\n\t\tletter-spacing: 1.5px;\n\t\tline-height: 15px;\n\t\tleft: 15px;\n\t".replace(/\s+/g," "),e.src=lib.assetURL+"extension/十周年UI/ui/assets/lbtn/shoushatip/skilltip.png",e.style.cssText="\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\tz-index: 91;\n\t\t--w: 133px;\n\t\t--h: calc(var(--w) * 50/431);\n\t\twidth: var(--w);\n\t\theight: var(--h);\n\t\tbottom: -22px;\n\t".replace(/\s+/g," "),n.appendChild(e),n.appendChild(i),player.appendChild(n),setTimeout(()=>n.remove(),1500)}(player,n)}function s(){[...game.players||[],...game.dead||[]].forEach(t=>t.decadeUI_updateShowCards?.())}export{n as registerDecadeUIHooks};
