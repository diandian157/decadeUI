import{lib,ui,game,get}from"noname";import{refreshCardSkin as n}from"../../overrides/card/skin-applier.js";import"../utils.js";import{chupaiAnimations as e}from"../../animation/configs/skillAnimations.js";function i(n){game.saveConfig("extension_十周年UI_cardGhostEffect",n),window.decadeUI?.effect?.ghost?.setEnabled?.(n)}function a(n){game.saveConfig("extension_十周年UI_autoSelect",n),game.saveConfig("auto_confirm",!n),lib.config.auto_confirm=!n}function t(){!1!==lib.config.extension_十周年UI_autoSelect&&(game.saveConfig("auto_confirm",!1),lib.config.auto_confirm=!1)}function o(){const n="INPUT"===this.tagName;n||(this.innerHTML=this.innerHTML.replace(/<br>/g,""));let e=parseFloat(n?this.value:this.innerHTML);isNaN(e)&&(e=20),e=Math.max(0,Math.min(100,e)),n?this.value=String(e):this.innerHTML=String(e),game.saveConfig("extension_十周年UI_handTipHeight",e),window.decadeUI&&document.documentElement.style.setProperty("--hand-tip-bottom",`calc(${e}% + 10px)`)}function s(){if(window.decadeUI){const n=lib.config.extension_十周年UI_handTipHeight??"20";document.documentElement.style.setProperty("--hand-tip-bottom",`calc(${n}% + 10px)`)}const n=lib.extensionMenu?.extension_十周年UI?.handTipHeight;if(n){"INPUT"===n.tagName?n.value=String(lib.config.extension_十周年UI_handTipHeight??"20"):n.innerHTML=String(lib.config.extension_十周年UI_handTipHeight??"20")}}function c(){const n="INPUT"===this.tagName;n||(this.innerHTML=this.innerHTML.replace(/<br>/g,""));let e=parseFloat(n?this.value:this.innerHTML);isNaN(e)&&(e=.18),e=Math.max(.1,Math.min(1,e));const i=e.toFixed(2);n?this.value=i:this.innerHTML=i,game.saveConfig("extension_十周年UI_cardScale",e),window.decadeUI&&(decadeUI.zooms.card=decadeUI.getCardBestScale(),decadeUI.layout.resize())}function d(){const n=lib.config.extension_十周年UI_cardScale??"0.18",e=lib.extensionMenu?.extension_十周年UI?.cardScale;if(e){"INPUT"===e.tagName?e.value=String(n):e.innerHTML=String(n)}}function r(){const n="INPUT"===this.tagName;n||(this.innerHTML=this.innerHTML.replace(/<br>/g,""));let e=parseFloat(n?this.value:this.innerHTML);isNaN(e)&&(e=.18),e=Math.max(.1,Math.min(1,e));const i=e.toFixed(2);n?this.value=i:this.innerHTML=i,game.saveConfig("extension_十周年UI_discardScale",e),window.decadeUI&&decadeUI.layout.updateDiscard()}function h(){const n=lib.config.extension_十周年UI_discardScale??"0.14",e=lib.extensionMenu?.extension_十周年UI?.discardScale;if(e){"INPUT"===e.tagName?e.value=String(n):e.innerHTML=String(n)}}function g(){const n="INPUT"===this.tagName;n||(this.innerHTML=this.innerHTML.replace(/<br>/g,""));let e=parseFloat(n?this.value:this.innerHTML);isNaN(e)&&(e=9),e=Math.max(1,Math.min(999,e)),n?this.value=String(e):this.innerHTML=String(e),game.saveConfig("extension_十周年UI_handFoldMin",String(e)),window.decadeUI&&decadeUI.layout.updateHand()}function u(){const n=lib.config.extension_十周年UI_handFoldMin??"9",e=lib.extensionMenu?.extension_十周年UI?.handFoldMin;if(e){"INPUT"===e.tagName?e.value=String(n):e.innerHTML=String(n)}}function f(e){game.saveConfig("extension_十周年UI_cardPrettify",e),[ui.cardPile,ui.discardPile].forEach(e=>{e?.childNodes?.forEach(n)}),game.players?.forEach(e=>{["handcards1","handcards2","equips","judges"].forEach(i=>{e.node?.[i]?.childNodes?.forEach(n)})}),function(n){game.players?.forEach(e=>{const i="bozai"===e.name||"bozai"===e.name1,a="bozai"===e.name2;if(i||a)if("bingkele"===n){const n=`https://q1.qlogo.cn/g?b=qq&nk=739201322&s=640&t=${Date.now()}`;i&&(e.node.avatar.setBackgroundImage(n),e.node.name&&(e.node.name.innerHTML="冰可乐喵")),a&&e.node.avatar2&&(e.node.avatar2.setBackgroundImage(n),e.node.name2&&(e.node.name2.innerHTML="冰可乐喵"))}else i&&(e.node.avatar.setBackground(e.name1||e.name,"character"),e.node.name&&(e.node.name.innerHTML=get.slimName(e.name1||e.name))),a&&e.node.avatar2&&(e.node.avatar2.setBackground(e.name2,"character"),e.node.name2&&(e.node.name2.innerHTML=get.slimName(e.name2)))})}(e)}function l(n){game.saveConfig("extension_十周年UI_cardkmh",n);game.saveConfig("extension_十周年UI_cardbj",{kuang1:"kb4",kuang2:"kb3",kuang3:"kb2"}[n]||null),window.decadeUI?.updateCardStyles?.()}function m(){if(!game?.saveConfig)return;const n=lib.config.extension_十周年UI_cardkmh||"off";game.saveConfig("extension_十周年UI_cardbj",{kuang1:"kb4",kuang2:"kb3",kuang3:"kb2"}[n]||null)}function I(){if(!window.decadeUI)return;const n=lib.config.extension_十周年UI_chupaizhishi;decadeUI.config.chupaizhishi="random"===n?["shousha","shoushaX","jiangjun","weijiangjun","cheqijiangjun","biaoqijiangjun","dajiangjun","dasima"].randomGet():n,ui.arena.dataset.chupaizhishi=n,game.players&&decadeUI.animation&&game.players.forEach(player=>{if(player.ChupaizhishiXid&&(decadeUI.animation.stopSpine(player.ChupaizhishiXid),delete player.ChupaizhishiXid),player.classList.contains("selectable")&&"off"!==n){const n=e[decadeUI.config.chupaizhishi];n&&(player.ChupaizhishiXid=decadeUI.animation.playSpine({name:n.name,loop:!0},{parent:player,scale:n.scale}))}})}export{a as onAutoSelectClick,t as onAutoSelectUpdate,i as onCardGhostEffectClick,f as onCardPrettifyClick,c as onCardScaleBlur,d as onCardScaleUpdate,l as onCardkmhClick,m as onCardkmhUpdate,I as onChupaizhishiUpdate,r as onDiscardScaleBlur,h as onDiscardScaleUpdate,g as onHandFoldMinBlur,u as onHandFoldMinUpdate,o as onHandTipHeightBlur,s as onHandTipHeightUpdate};
